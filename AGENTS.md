# AGENTS.md — правила безопасной работы AI-агента (Codex) в этом репозитории

Этот файл задаёт строгие правила работы AI-агента (далее “агент”) в данном проекте сайта.
Цель: безопасные, воспроизводимые изменения **только внутри репозитория**, без риска для системы, данных и приватности.

---

## 0) Определение корня проекта

**Корень проекта (repo root)** — это папка, в которой находится этот файл `AGENTS.md`.

- Любые операции чтения/записи **вне** корня проекта запрещены.
- Любые операции с путями, которые выходят за пределы корня проекта (например `../`) запрещены.

---

## 1) Границы работы (строгая песочница репозитория)

- Агент **обязан работать только** внутри корня проекта и подпапок.
- Агенту **запрещено** читать, изменять, создавать или удалять файлы **за пределами** папки проекта.
- Агенту **запрещено** следовать симлинкам/ярлыкам, которые ведут за пределы репозитория.
- Агенту **запрещено** взаимодействовать с домашней директорией пользователя и системными папками (например `~`, `/etc`, `/var`, `C:\Windows`, `Library`, `Program Files` и т.п.).

Если нужные данные находятся вне репозитория — агент должен остановиться и попросить пользователя **вручную скопировать/добавить** их внутрь проекта.

---

## 2) Привилегии и системные команды (жёсткий запрет)

- Агент **никогда не использует** `sudo` и любые действия, требующие повышенных прав.
- Агенту **запрещено** управлять системой, службами, сетью, пользователями, правами доступа и политиками безопасности.

---

## 3) Запрещённые действия, которые могут навредить системе/данным

Агент **никогда** не должен выполнять действия разрушительного или рискованного характера, включая (но не ограничиваясь):

- Команды удаления/форматирования и аналоги: `rm -rf`, `del /s`, `mkfs`, `dd`, изменения разделов диска.
- Управление службами/демонами ОС: `systemctl`, `service`, `launchctl`.
- Управление сетевой конфигурацией/фаерволом/VPN: `iptables`, `ufw`, `netsh`, отключение защитных механизмов.
- Установка/запуск непроверенных бинарников и скриптов из интернета.
- Изменение глобальных конфигов окружения: `PATH`, shell rc-файлы, системные профили.

Если пользователь просит о чём-то из этого — агент обязан **отказаться** и предложить безопасную альтернативу в рамках проекта.

---

## 4) Секреты и приватность

- Агент **не запрашивает** и **не сохраняет** секреты (пароли, токены, ключи).
- Агент **не выводит** секреты в терминал/логи/ответы.
- Файлы и паттерны секретов (`.env`, `*.pem`, `id_rsa`, `secrets.*`, ключи доступа, cookie/credential store):
  - **не читать без крайней необходимости**
  - **не коммитить**
  - **не публиковать**
- Если проекту нужны переменные окружения — агент создаёт/обновляет **только** `.env.example` (с пустыми значениями и комментариями), а не реальный `.env`.

---

## 5) Сеть и внешние ресурсы

По умолчанию:

- Агент **не делает** сетевых запросов (curl/wget/скачивание архивов/обращения к внешним API),
  если это не требуется явно задачей.
- Агент **не отправляет** содержимое проекта наружу и не публикует его.

Если по задаче нужны зависимости:

- Допускается использование стандартного менеджера зависимостей проекта **в пределах репозитория** (например `npm install`, `pnpm i`, `yarn`), только если это ожидаемо.
- Агент не должен добавлять новые внешние зависимости без необходимости.

---

## 6) Разрешённые действия внутри проекта

Агенту разрешено:

- Создавать/редактировать/удалять файлы **только** в пределах репозитория.
- Запускать безопасные проектные команды, относящиеся к разработке сайта:
  - `npm ci` / `npm install` (если принято в проекте)
  - `npm run dev` / `npm run build` / `npm test` / `npm run lint`
- Обновлять документацию (`README.md`, `docs/*`) и конфиги форматирования/линтинга, если это нужно задаче.

---

## 7) Правила изменений (качество и минимальность)

- Делать изменения **минимально необходимыми** для задачи.
- Сохранять существующий стиль кода и структуру проекта.
- Не проводить “рефакторинг ради рефакторинга”.
- Не переименовывать и не перемещать файлы без необходимости.
- Не удалять функциональность, если этого явно не требуется.
- Если меняется поведение — по возможности обновить тесты/линт/документацию (если они есть).

---

## 8) Git-операции (ограничения)

Разрешено:

- `git status`
- `git diff`

Запрещено без явного указания пользователя:

- `git commit`
- `git push`
- Любые действия с удалёнными репозиториями (`git remote`, `git fetch`, `git pull`, публикация куда-либо)

---

## 9) Что делать при неопределённости или риске

Если агент не уверен, или задача затрагивает безопасность/секреты/выход за пределы репо:

- Агент **останавливается**.
- Коротко объясняет риск.
- Предлагает безопасные варианты в рамках проекта.

---

## 10) Формат отчёта о выполненной работе

После выполнения задачи агент должен:

- Перечислить, **какие файлы изменены** и кратко что сделано.
- Если запускались команды — указать **какие** и результат (успех/ошибка).
- Не включать в отчёт приватные данные, токены, содержимое `.env`.

---

## 11) Ключевое правило (самое важное)

> Агент (Codex) работает **только** внутри этого репозитория и **не имеет права** читать/писать что-либо вне папки проекта.  
> Любая попытка выйти за пределы repo root должна быть немедленно остановлена.

---
